# Утилита для мониторинга потребления ресурсов 

Скрипт `init_web_plugin.py` - запускает web сервис API (адрес по-умолчанию http://127.0.0.1:5555/swagger)

Скрипт `init_temp_file_remover.py` - очищает временные файлы сформированных в результате запросов

Скрипт `save_telemetry_data.py` - сохраняет данные потребления ЦПУ, Сободной памяти RAM, битрейт сетевого трафика
на всех сетевых интерфейсах в таблицу *.CSV в папке telemetry. Используется для запуска через api интерфейс.

Скрипт `show_online_telemetry.py` - Альтернативный вариант собирать статистику потребления ресурсов. 
Сохраняет данные потребления ЦПУ, Сободной памяти RAM, битрейт сетевого трафика на всех сетевых интерфейсах в таблицу *.CSV в папке telemetry. 
Отображает в консоли статистику в реальном времени.
Пригодно в случаях когде невозможно запустить скрипт save_telemetry_data.py посредством api (на ОС linux api интерфейс запускается через Docker контейнер) 

<img src="/info/img1.jpg" alt="img1" style="width:400px;"/>\
Скрипт `get_hardware_statistic.py` с параметром DD-MM-YYYY строит графики потребления ресурсов (Нагрузка на ЦП, Свободная память, входящий/исходящий трафик на сетевых интерфейсах) за указанные сутки. По умолчанию выводится статистика по всем сетевым интерфейсам.

<img src="/info/img2.jpg" alt="img2" style="width:800px;"/>



# Docker file

Веб сервис утилиты использует python версии 3.12. Для корректной работы без существенных изменений в ОС linux 
рекомендуется запустить сервис из  Docker контейнера.

В корневой папке где хранится Dockerfile через командную строку запустить команду\
`docker build -t {имя образа} .`

Посмотреть что образ появился в списке docker\
`docker images`

Перед запуском контейнера необходимо создать общую папку куда будет сохраняться телеметрия родительской ОС.

`mkdir -p {путь папки на хосте}`

Запустить контейнер с параметрами\
`docker container run -p 5555:5555 -v {путь папки на хосте}:{путь папки в докер контейнере} -d {имя образа}`

где:\
путь папки в докер контейнере по-умолчанию `/code/telemetry`;\
`-p` - задать соответствие портов в контейнере и на хост машине;\
`-d `- запустит контейнер в фоновом режиме;\
`-v `- примонтировать папку хоста в контейнер.\

Из родительской ОС запускается скрипт `save_telemetry_data.py`, данные сохраняются в `{путь папки на хосте}`. 
Данные могуть быть переданы из `{путь папки в докер контейнере}` через api запрос


# Возможные проблемы
1. Во избежании рассинхронизации ответов на запросы и фактического потребления ресурсов необходима 
синхронизация времени как в докер контейнере так и в родительской ОС (временная зона по-умолчанию
 TZ=Europe/Samara)
